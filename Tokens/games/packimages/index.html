<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Card Pack Opener</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #121212;
    color: #fff;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 20px;
  }
  .pack { 
    position: relative; 
    width: 200px; 
    height: 300px; 
    margin: 20px; 
    cursor: pointer; 
    border-radius: 10px;
    overflow: hidden;
    display: flex;
    align-items: center;
    justify-content: center;
    border: 2px solid #fff;
  }
  .pack img { 
    width: 100%; 
    height: 100%; 
    object-fit: contain;
  }
  #card { display: none; width: 200px; height: 300px; margin: 20px; position: relative; }
  #card img { width: 100%; height: 100%; border-radius: 8px; }
  .rarity-bar {
    position: absolute;
    bottom: 0;
    width: 100%;
    padding: 5px;
    text-align: center;
    font-weight: bold;
    border-bottom-left-radius: 8px;
    border-bottom-right-radius: 8px;
  }
  #inventory { margin-top: 30px; }
  .inventory-card { display: inline-block; margin: 10px; position: relative; }
  .inventory-card img { width: 120px; height: 180px; border-radius: 8px; }
  .sell-btn { position: absolute; top: 5px; right: 5px; background: #0008; color: #fff; border: none; padding: 2px 5px; cursor: pointer; border-radius: 4px; z-index: 10; }
  #tokens, #coins { margin: 10px; font-size: 18px; }
  .pack:hover { box-shadow: 0 0 15px #fff; }
  #packs-container { display: flex; flex-wrap: wrap; justify-content: center; }
</style>
</head>
<body>

<h1>Card Pack Opener</h1>
<div id="tokens">Tokens: 5</div>
<div id="coins">Coins: 0</div>
<div id="packs-container">
  <!-- Packs will be dynamically added -->
</div>
<div id="card">
  <img id="card-img" src="" alt="Card">
  <div id="rarity-bar" class="rarity-bar"></div>
</div>
<h2>Inventory</h2>
<div id="inventory"></div>

<script>
const rarityColors = { 'Common': 'gray', 'Uncommon': 'green', 'Rare': 'blue', 'Epic': 'purple', 'Legendary': 'orange', 'Divine': 'red' };
let tokens = parseInt(getCookie('tokens')) || 5;
let coins = parseInt(getCookie('coins')) || 0;
updateTokens();
updateCoins();
let inventory = JSON.parse(getCookie('inventory') || '[]');
updateInventory();

const rarities = ['Common', 'Uncommon', 'Rare', 'Epic', 'Legendary', 'Divine'];
const packsContainer = document.getElementById('packs-container');

// Create one pack per rarity using the uploaded PNG files
rarities.forEach(rarity => {
    const packDiv = document.createElement('div');
    packDiv.className = 'pack';
    const packImg = document.createElement('img');
    packImg.src = `${rarity}.png`; // Use the uploaded PNG files directly
    packImg.alt = `${rarity} Pack`;
    packDiv.appendChild(packImg);
    packDiv.onclick = () => openPack(rarity);
    packsContainer.appendChild(packDiv);
});

function getCookie(name) { const value = `; ${document.cookie}`; const parts = value.split(`; ${name}=`); if (parts.length === 2) return parts.pop().split(';').shift(); }
function setCookie(name, value) { document.cookie = name + '=' + value + '; path=/'; }

async function openPack(selectedRarity) {
  if (tokens < 1) { alert('Not enough tokens!'); return; }
  tokens--; setCookie('tokens', tokens); updateTokens();
  const cardsList = await fetch('cards/cards.json').then(res => res.json());
  const filteredCards = cardsList.filter(c => c.rarity === selectedRarity);
  if(filteredCards.length === 0) { alert('No cards of this rarity found.'); return; }
  const cardData = filteredCards[Math.floor(Math.random() * filteredCards.length)];
  document.getElementById('card-img').src = `cards/${cardData.image}`;
  const rarityBar = document.getElementById('rarity-bar');
  rarityBar.textContent = cardData.name;
  rarityBar.style.backgroundColor = rarityColors[cardData.rarity] || 'white';
  document.getElementById('card').style.display = 'block';
  inventory.push(cardData);
  setCookie('inventory', JSON.stringify(inventory));
  updateInventory();
}

function updateTokens() { document.getElementById('tokens').textContent = `Tokens: ${tokens}`; }
function updateCoins() { document.getElementById('coins').textContent = `Coins: ${coins}`; }
function updateInventory() { const inv = document.getElementById('inventory'); inv.innerHTML = ''; inventory.forEach((card, index) => { const div = document.createElement('div'); div.className = 'inventory-card'; div.innerHTML = `<img src='cards/${card.image}'><button class='sell-btn' onclick='sellCard(${index})'>Sell</button>`; inv.appendChild(div); }); }
function sellCard(index) { const card = inventory[index]; coins += card.coinWorth || 1; setCookie('coins', coins); inventory.splice(index, 1); setCookie('inventory', JSON.stringify(inventory)); updateCoins(); updateInventory(); }
</script>

</body>
</html>
