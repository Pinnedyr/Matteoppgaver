<!DOCTYPE html>
<html lang="no">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Tokens / Coins</title>
<style>
/* ================== BASE ================== */
body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
  margin: 0;
  padding: 24px;
}

.container {
  max-width: 1000px;
  margin: 0 auto;
  text-align: center;
}

/* ================== HEADER ================== */
h1 {
  font-size: 3rem;
  margin-bottom: 16px;
}

/* ================== VALUTA ================== */
.currency-display {
  display: flex;
  justify-content: center;
  gap: 32px;
  margin-bottom: 24px;
  font-size: 1.6rem;
  align-items: center;
}

.currency-display img {
  width: 28px;
  height: 28px;
}

/* ================== BYTT KNAPP ================== */
.button {
  display: inline-block;
  padding: 12px 18px;
  border-radius: 14px;
  background: #1f2937;
  color: #f8fafc;
  border: 1px solid #334155;
  cursor: pointer;
  font-weight: 600;
  margin-bottom: 24px;
}

.button:hover { background: #111827; }
.button:disabled { opacity: 0.5; cursor: not-allowed; }

/* ================== SPILL LISTE ================== */
.scroll-wrapper {
  display: flex;
  justify-content: center;
  width: 100%;
}

.scroll-bar {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 12px;
  margin-bottom: 24px;
}

/* ================== SPILL KORT ================== */
.game-card {
  flex: 1 1 140px;
  max-width: 150px;
  display: flex;
  flex-direction: column;
  align-items: center;
}

/* ================== SPILL KNAPP ================== */
.game-button {
  width: 100%;
  aspect-ratio: 4 / 5;
  border-radius: 14px;
  overflow: hidden;
  border: 1px solid #334155;
  cursor: pointer;
  display: flex;
  flex-direction: column;
  background: #1f2937;
}

.game-button.locked {
  opacity: 0.25;
  cursor: not-allowed;
}

.game-button img {
  width: 100%;
  aspect-ratio: 1 / 1;
  object-fit: cover;
}

/* ================== SPILL NAVN ================== */
.game-label {
  flex: 1;
  background: #111827;
  color: #f8fafc;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 600;
  font-size: 0.85rem;
  padding: 6px;
  text-align: center;
}

/* ================== PRIS ================== */
.game-price {
  margin-top: 6px;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 4px;
  font-size: 0.8rem;
}

.game-price img {
  width: 14px;
  height: 14px;
}

/* ================== MODAL ================== */
#modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.75);
  display: none;
  z-index: 900;
}

#game-modal {
  position: fixed;
  inset: 4%;
  max-width: 1200px;
  max-height: 800px;
  margin: auto;
  background: #0f172a;
  border: 2px solid #334155;
  border-radius: 16px;
  display: none;
  z-index: 1000;
}

#game-modal iframe {
  width: 100%;
  height: 100%;
  border: none;
  border-radius: 14px;
  background: #000;
}

/* ================== LUKK KNAPP ================== */
#close-modal {
  position: absolute;
  top: 10px;
  right: 14px;
  width: 36px;
  height: 36px;
  border-radius: 999px;
  border: 1px solid #334155;
  background: #111827;
  color: #fff;
  font-size: 18px;
  cursor: pointer;
  z-index: 1100;
}

#close-modal:hover {
  background: #020617;
}

/* ================== MOBIL ================== */
@media (max-width: 600px) {
  h1 { font-size: 2.2rem; }

  .currency-display {
    font-size: 1.3rem;
  }

  .currency-display img {
    width: 24px;
    height: 24px;
  }

  .game-card {
    max-width: 120px;
  }
}
</style>
</head>
<body>

<div class="container">
  <h1>What The Facqkuit</h1>
  <div class="currency-display">
    <div><img src="coin.png" alt="Coin"><div><span id="coins-count">0</span> Coins</div></div>
    <div><img src="token.png" alt="Token"><div><span id="tokens-count">0</span> Tokens</div></div>
  </div>
  <button class="button" id="convert-button">Bytt Coins til Tokens</button>
  <h2>Spill for å tjene Coins:</h2>
  <div class="scroll-wrapper"><div class="scroll-bar" id="games-scrollbar"></div></div>
</div>

<div id="modal-overlay"></div>
<div id="game-modal"><iframe id="game-iframe"></iframe></div>

<script>
// Cookie helpers
function getCookie(name){ const m = document.cookie.match(new RegExp('(^| )'+name+'=([^;]+)')); return m && !isNaN(parseFloat(m[2])) ? parseFloat(m[2]) : 0; }
function setCookie(name,value,days=365){ const d=new Date(); d.setTime(d.getTime()+days*24*60*60*1000); document.cookie=name+"="+value+";path=/;expires="+d.toUTCString(); }

let coins = getCookie("coins");
let tokens = getCookie("tokens");

const coinsCountEl = document.getElementById("coins-count");
const tokensCountEl = document.getElementById("tokens-count");
const convertBtn = document.getElementById("convert-button");

function updateDisplay(){
  coinsCountEl.textContent = coins.toLocaleString();
  tokensCountEl.textContent = tokens.toLocaleString();
  convertBtn.disabled = coins < 10000;
}
setInterval(()=>{ coins = getCookie("coins"); tokens = getCookie("tokens"); updateDisplay(); },1000);
updateDisplay();

convertBtn.addEventListener("click",()=>{
  if(coins>=10000){
    const newTokens = Math.floor(coins/10000);
    tokens+=newTokens;
    coins-=newTokens*10000;
    setCookie("coins",coins);
    setCookie("tokens",tokens);
    updateDisplay();
    alert(`${newTokens} Token(s) er lagt til!`);
  }else alert("Du trenger minst 10 000 Coins for 1 Token.");
});

const games = [
  {name:"Clicker", img:"game1.png", url:"/Tokens/games/Clicker.html"},
  {name:"Dice", img:"game2.png", url:"/Tokens/games/Dice.html", price:3500}
];

const scrollbar = document.getElementById("games-scrollbar");
const modalOverlay = document.getElementById("modal-overlay");
const gameModal = document.getElementById("game-modal");
const gameIframe = document.getElementById("game-iframe");

games.forEach(game=>{
  const purchased = getCookie(`gamePurchased_${game.name}`)==1;

  const card = document.createElement("div");
  card.className="game-card";

  const btn = document.createElement("div");
  btn.className="game-button";
  if(game.price && !purchased) btn.classList.add("locked");

  const img = document.createElement("img");
  img.src=game.img;
  img.alt=game.name;

  const label = document.createElement("div");
  label.className="game-label";
  label.textContent=game.name;

  btn.appendChild(img);
  btn.appendChild(label);
  card.appendChild(btn);

  if(game.price){
    const priceEl = document.createElement("div");
    priceEl.className="game-price";
    priceEl.innerHTML=`${game.price.toLocaleString()} <img src="coin.png" alt="Coin">`;
    card.appendChild(priceEl);
  }

  scrollbar.appendChild(card);

  btn.addEventListener("click",()=>{
    if(game.price && !purchased){
      if(coins<game.price){ alert(`Du trenger minst ${game.price} Coins for ${game.name}.`); return; }
      coins-=game.price;
      setCookie("coins",coins);
      setCookie(`gamePurchased_${game.name}`,1);
      btn.classList.remove("locked");
      updateDisplay();
      alert(`Du har kjøpt ${game.name}!`);
    }
    if(!game.price || getCookie(`gamePurchased_${game.name}`)==1){
      modalOverlay.style.display="block";
      gameModal.style.display="block";
      gameIframe.src=game.url;
    }
  });
});

modalOverlay.addEventListener("click",()=>{
  gameIframe.src=""; gameModal.style.display="none"; modalOverlay.style.display="none";
});
document.addEventListener('keydown',(e)=>{ if(e.key==='Escape'){ gameIframe.src=""; gameModal.style.display="none"; modalOverlay.style.display="none"; } });
</script>
</body>
</html>
